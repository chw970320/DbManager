# 리팩토링 계획

이 문서는 DbManager 프로젝트의 리팩토링 계획을 정리합니다.

**마지막 업데이트**: 2024-12-12

---

## 목차

1. [전체 로드맵](#1-전체-로드맵)
2. [Phase별 상세 작업](#2-phase별-상세-작업)
3. [리스크 관리](#3-리스크-관리)
4. [마일스톤](#4-마일스톤)

---

## 1. 전체 로드맵

### Phase 1 (1-2주): Critical 이슈 해결 ✅ 완료

**목표**: 데이터 손실 위험, 보안 취약점, 런타임 크래시 가능성 제거

**상태**: ✅ 완료 (9/10, #C9 인증/권한 제외)

**완료일**: 2024-12-12

**완료된 작업**:

- ✅ 파일 락 메커니즘 도입 (`file-lock.ts`)
- ✅ 런타임 타입 검증 추가 (`type-guards.ts`)
- ⬜ 인증/권한 체크 도입 (제외)
- ✅ Path Traversal 취약점 수정 (`validateFilename`)
- ✅ 원자적 쓰기 패턴 구현 (`atomicWriteFile`)

---

### Phase 2 (3-4주): High Priority 이슈 해결 ✅ 완료

**목표**: 타입 안정성 강화, 성능 개선, CRUD 완성도 향상

**상태**: ✅ 완료 (6/6)

**완료일**: 2024-12-12

**완료된 작업**:

- ✅ 데이터 검증 로직 강화 (`validation.ts`)
- ✅ N+1 문제 해결 (`cache.ts`)
- ✅ 전체 파일 메모리 로드 최적화 (`data-index.ts`)
- ✅ 검증 로직 통합
- ✅ Domain API POST 엔드포인트 추가

---

### Phase 3 (5-8주): Medium Priority 리팩토링 ✅ 완료

**목표**: 코드 중복 제거, 파일 분리, 컴포넌트 리팩토링

**상태**: ✅ 완료 (6 완료, 8 부분 해결)

**완료일**: 2024-12-12

**완료된 작업**:

- ✅ file-handler.ts 제네릭 함수로 통합 (`file-operations.ts`)
- ⚠️ Table 컴포넌트 통합 (타입 정의 추출)
- ⚠️ FileManager 컴포넌트 통합 (API 함수 추가)
- ⚠️ browse 페이지 상태 관리 통합 (`use-data-table.ts`)
- ⚠️ 파일 분리 (일부 진행)

---

### Phase 4 (지속적): Low Priority 개선 ✅ 완료

**목표**: 코드 품질 향상, 문서화 개선, 성능 최적화

**상태**: ✅ 완료 (1 완료, 1 부분 해결, 테스트 제외)

**완료일**: 2024-12-12

**완료된 작업**:

- ⚠️ 로깅 라이브러리 도입 (`logger.ts`)
- ⬜ 테스트 코드 작성 (제외)
- ✅ Window 타입 선언 추가 (`app.d.ts`)

---

## 2. Phase별 상세 작업

### Phase 1: Critical 이슈 해결 (1-2주)

#### 포함 이슈 목록

| 이슈 ID | 제목                         | 우선순위 | 예상 소요 시간 | 의존성   |
| ------- | ---------------------------- | -------- | -------------- | -------- |
| #C1     | 동시성 문제                  | 1        | 3일            | -        |
| #C2     | JSON 파싱 타입 검증 없음     | 1        | 2일            | -        |
| #C5     | 파일 쓰기 실패 시 롤백 없음  | 1        | 2일            | #C1      |
| #C9     | 인증/권한 체크 부재          | 1        | 3일            | -        |
| #C10    | Path Traversal 취약점        | 1        | 1일            | -        |
| #C3     | FormData null 체크 부족      | 2        | 0.5일          | -        |
| #C4     | 부분 업데이트 undefined 처리 | 2        | 1일            | #C2      |
| #C7     | Non-null assertion 남용      | 2        | 1일            | #C2      |
| #C8     | 파일 읽기 실패 처리          | 2        | 1일            | #C2      |
| #C6     | 참조 무결성 검증 없음        | 3        | 2일            | #C2, #C4 |

**총 예상 소요 시간**: 16.5일 (약 2주)

#### 작업 간 의존성

```
#C2 (타입 검증)
  ├─> #C4 (부분 업데이트)
  ├─> #C7 (Non-null assertion)
  └─> #C8 (파일 읽기 실패)
      └─> #C6 (참조 무결성)

#C1 (동시성)
  └─> #C5 (원자적 쓰기)

#C10 (Path Traversal)
  └─> 모든 파일 관련 작업
```

#### 필요한 테스트 범위

1. **단위 테스트**:
   - 타입 가드 함수 (`isVocabularyData`, `isDomainData`, `isTermData`)
   - 경로 검증 함수 (`getDataPath`)
   - 원자적 쓰기 함수

2. **통합 테스트**:
   - 동시성 테스트 (두 개의 요청 동시 처리)
   - 파일 락 메커니즘 테스트
   - Path Traversal 공격 시뮬레이션

3. **수동 테스트**:
   - 인증/권한 체크 동작 확인
   - 손상된 JSON 파일 로드 테스트
   - 동시 수정 시나리오 테스트

#### 완료 기준

- ✅ 모든 Critical 이슈 해결 완료
- ✅ 타입 가드 함수로 모든 JSON 파싱 보호
- ✅ 파일 락 메커니즘으로 동시성 문제 해결
- ✅ 인증 미들웨어로 모든 API 보호
- ✅ Path Traversal 취약점 제거
- ✅ 원자적 쓰기 패턴으로 데이터 손실 방지
- ✅ 단위 테스트 커버리지 80% 이상
- ✅ 통합 테스트 통과

---

### Phase 2: High Priority 이슈 해결 (3-4주)

#### 포함 이슈 목록

| 이슈 ID | 제목                    | 우선순위 | 예상 소요 시간 | 의존성  |
| ------- | ----------------------- | -------- | -------------- | ------- |
| #H3     | Term API N+1 문제       | 1        | 2일            | -       |
| #H4     | 데이터 검증 로직 부족   | 1        | 3일            | Phase 1 |
| #H7     | 전체 파일 메모리 로드   | 1        | 4일            | -       |
| #H1     | 하위 호환성 필드 중복   | 2        | 2일            | -       |
| #H2     | History API 유니온 타입 | 2        | 2일            | -       |
| #H5     | Domain API POST 없음    | 2        | 1일            | -       |
| #H6     | 에러 처리 일관성 부족   | 2        | 2일            | -       |
| #H8     | 검증 로직 분산          | 2        | 3일            | #H4     |
| #H9     | Partial 타입 사용       | 2        | 2일            | #H4     |
| #H10    | API 응답 타입 불일치    | 2        | 2일            | -       |

**총 예상 소요 시간**: 23일 (약 3-4주)

#### 작업 간 의존성

```
Phase 1 완료
  └─> #H4 (데이터 검증 로직)
      └─> #H8 (검증 로직 통합)
      └─> #H9 (Partial 타입 개선)

#H7 (메모리 로드 최적화)
  └─> #H3 (N+1 문제) - 캐싱과 연관
```

#### 필요한 테스트 범위

1. **단위 테스트**:
   - 검증 함수 (`validateVocabularyEntry`, `validateDomainEntry`, `validateTermEntry`)
   - 에러 핸들러 유틸리티
   - 캐싱 메커니즘

2. **성능 테스트**:
   - 대용량 데이터 (10,000개 이상) 조회 성능
   - N+1 문제 해결 전후 비교
   - 메모리 사용량 측정

3. **통합 테스트**:
   - Domain API POST 엔드포인트
   - History API 타입 안정성
   - API 응답 타입 일관성

#### 완료 기준

- ✅ 모든 High Priority 이슈 해결 완료
- ✅ 데이터 검증 로직 통합 및 강화
- ✅ N+1 문제 해결 (캐싱 메커니즘)
- ✅ 대용량 데이터 조회 성능 개선 (50% 이상)
- ✅ Domain API POST 엔드포인트 추가
- ✅ 에러 처리 일관성 확보
- ✅ API 응답 타입 통일
- ✅ 성능 테스트 통과

---

### Phase 3: Medium Priority 리팩토링 (5-8주)

#### 포함 이슈 목록

| 이슈 ID | 제목                           | 우선순위 | 예상 소요 시간 | 의존성 |
| ------- | ------------------------------ | -------- | -------------- | ------ |
| #M3     | Table 컴포넌트 중복            | 2        | 3일            | -      |
| #M7     | browse 페이지 상태 관리 중복   | 2        | 4일            | -      |
| #M8     | TermEditor 이중 역할           | 2        | 2일            | -      |
| #M9     | file-handler.ts 파일 크기      | 2        | 3일            | -      |
| #M1     | file-handler.ts load/save 중복 | 3        | 3일            | #M9    |
| #M2     | file-handler.ts 파일 관리 중복 | 3        | 2일            | #M9    |
| #M4     | FileManager 컴포넌트 중복      | 3        | 3일            | -      |
| #M5     | xlsx-parser.ts 파싱 함수 중복  | 3        | 3일            | -      |
| #M10    | Table 컴포넌트 Props Drilling  | 3        | 2일            | #M3    |
| #M11    | 불필요한 데이터 변환 중복      | 3        | 1일            | -      |
| #M12    | 페이지 데이터 로드 패턴 중복   | 3        | 2일            | #M7    |
| #M13    | xlsx-parser.ts 파일 크기       | 3        | 2일            | -      |
| #M14    | 상태 관리 패턴 일관성 부족     | 3        | 2일            | #M7    |
| #M6     | Store 파일명 네이밍 불일치     | 4        | 0.5일          | -      |

**총 예상 소요 시간**: 32일 (약 5-8주)

#### 작업 간 의존성

```
#M9 (file-handler.ts 분리)
  ├─> #M1 (load/save 통합)
  └─> #M2 (파일 관리 통합)

#M3 (Table 컴포넌트 통합)
  └─> #M10 (Props Drilling 해결)

#M7 (browse 페이지 통합)
  ├─> #M12 (데이터 로드 패턴 통합)
  └─> #M14 (상태 관리 패턴 통일)

#M13 (xlsx-parser.ts 분리)
  └─> #M5 (파싱 함수 통합)
```

#### 필요한 테스트 범위

1. **리그레션 테스트**:
   - 모든 페이지 기능 동작 확인
   - 모든 컴포넌트 렌더링 확인
   - 모든 API 엔드포인트 동작 확인

2. **통합 테스트**:
   - 제네릭 컴포넌트 동작 확인
   - 파일 분리 후 import 경로 확인

3. **성능 테스트**:
   - 리팩토링 전후 성능 비교
   - 번들 크기 비교

#### 완료 기준

- ✅ 모든 Medium Priority 이슈 해결 완료
- ✅ file-handler.ts 파일 분리 (1176줄 → 각 파일 200-300줄)
- ✅ xlsx-parser.ts 파일 분리 (833줄 → 각 파일 200-300줄)
- ✅ Table 컴포넌트 통합 (제네릭 컴포넌트)
- ✅ FileManager 컴포넌트 통합
- ✅ browse 페이지 상태 관리 통합
- ✅ TermEditor 분리 (VocabularyEditor + TermEditor)
- ✅ 모든 기능 정상 동작 확인
- ✅ 코드 중복 50% 이상 감소

---

### Phase 4: Low Priority 개선 (지속적)

#### 포함 이슈 목록

| 이슈 ID | 제목                             | 우선순위 | 예상 소요 시간 | 의존성 |
| ------- | -------------------------------- | -------- | -------------- | ------ |
| #L1     | console.log 프로덕션 코드에 남음 | 4        | 1일            | -      |
| #L2     | window 객체 any 타입 사용        | 4        | 0.5일          | -      |
| #L7     | 주석 부족 (복잡한 로직)          | 4        | 2일            | -      |
| #L8     | 성능 최적화 기회                 | 4        | 2일            | -      |
| #L10    | xlsx-parser.ts any 타입          | 4        | 0.5일          | -      |
| #L3     | 테스트 코드 완전 부재            | 5        | 5일            | -      |
| #L4     | Deprecated 함수 아직 export      | 5        | 0.5일          | -      |
| #L5     | TODO 주석 미구현                 | 5        | 1일            | -      |
| #L6     | 함수/변수명 불명확               | 5        | 1일            | -      |
| #L9     | 사용되지 않는 변수               | 5        | 0.5일          | -      |
| #L11    | 불필요한 데이터 변환             | 5        | 1일            | -      |
| #L12    | 주석 언어 혼용                   | 5        | 1일            | -      |
| #L13    | 함수 매개변수 주석 부족          | 5        | 2일            | -      |
| #L14    | 배열 메서드 체이닝 최적화        | 5        | 1일            | -      |
| #L15    | 하드코딩된 매직 넘버             | 5        | 1일            | -      |

**총 예상 소요 시간**: 20일 (지속적으로 진행)

#### 작업 간 의존성

```
#L3 (테스트 코드)
  └─> 모든 리팩토링 작업의 검증 도구

#L12 (주석 언어 통일)
  └─> #L7 (주석 부족)
  └─> #L13 (매개변수 주석)
```

#### 필요한 테스트 범위

1. **테스트 코드 작성**:
   - 핵심 유틸리티 함수 단위 테스트
   - API 엔드포인트 통합 테스트
   - 컴포넌트 테스트

2. **코드 리뷰**:
   - 주석 개선 사항 검토
   - 네이밍 개선 사항 검토

#### 완료 기준

- ✅ 로깅 라이브러리 도입 및 console.log 제거
- ✅ 테스트 코드 커버리지 60% 이상
- ✅ 주석 언어 통일 (한국어 또는 영어)
- ✅ 모든 함수에 JSDoc 주석 추가
- ✅ 매직 넘버 상수화
- ✅ Deprecated 함수 제거 또는 마이그레이션

---

## 3. 리스크 관리

### 예상되는 어려움

#### Phase 1 리스크

1. **파일 락 메커니즘 구현 복잡도**
   - **리스크**: 파일 락 라이브러리 선택 및 구현 복잡도
   - **영향**: 동시성 문제 해결 지연
   - **대안**: 간단한 파일 기반 락부터 시작, 점진적 개선

2. **인증 미들웨어 도입 시 기존 API 영향**
   - **리스크**: 모든 API에 인증 추가 시 기존 클라이언트 영향
   - **영향**: 기존 기능 작동 중단 가능
   - **대안**: 점진적 도입 (옵션 인증 → 필수 인증), 마이그레이션 가이드 제공

3. **타입 가드 함수 구현 범위**
   - **리스크**: 모든 JSON 파싱 지점에 타입 가드 추가 작업량
   - **영향**: 작업 시간 증가
   - **대안**: 우선순위 높은 지점부터 시작, 점진적 적용

#### Phase 2 리스크

1. **캐싱 메커니즘의 메모리 사용량**
   - **리스크**: 대용량 데이터 캐싱 시 메모리 부족
   - **영향**: 서버 메모리 부족, 성능 저하
   - **대안**: TTL 설정, LRU 캐시, 메모리 제한 설정

2. **인덱스 파일 생성의 복잡도**
   - **리스크**: 인덱스 파일 생성 및 유지보수 복잡도
   - **영향**: 구현 시간 증가, 버그 가능성
   - **대안**: 간단한 캐싱부터 시작, 필요 시 인덱스 도입

3. **검증 로직 통합 시 기존 코드 영향**
   - **리스크**: 검증 로직 통합 시 기존 동작 변경
   - **영향**: 기존 기능 작동 중단 가능
   - **대안**: 기존 검증 로직 유지하면서 점진적 통합

#### Phase 3 리스크

1. **제네릭 컴포넌트 구현 복잡도**
   - **리스크**: Svelte 5의 제네릭 컴포넌트 지원 제한
   - **영향**: 구현 방식 변경 필요
   - **대안**: Props로 타입 전달, 또는 별도 컴포넌트 유지

2. **파일 분리 시 import 경로 변경**
   - **리스크**: 많은 파일에서 import 경로 수정 필요
   - **영향**: 작업량 증가, 실수 가능성
   - **대안**: index.ts로 기존 경로 유지, 점진적 마이그레이션

3. **리팩토링 중 기능 회귀**
   - **리스크**: 리팩토링 중 기존 기능 작동 중단
   - **영향**: 사용자 영향
   - **대안**: 단계별 테스트, 기능 브랜치 분리

#### Phase 4 리스크

1. **테스트 코드 작성 시간**
   - **리스크**: 테스트 코드 작성에 많은 시간 소요
   - **영향**: 다른 작업 지연
   - **대안**: 핵심 기능부터 시작, 점진적 확장

2. **주석 개선 작업량**
   - **리스크**: 모든 함수에 주석 추가 작업량
   - **영향**: 작업 시간 증가
   - **대안**: 우선순위 높은 함수부터 시작

### 대안 계획

#### Phase 1 대안

1. **파일 락 메커니즘**
   - **1차 시도**: `proper-lockfile` 라이브러리 사용
   - **대안 1**: 간단한 파일 기반 플래그 파일 사용
   - **대안 2**: 데이터베이스 마이그레이션 고려 (장기)

2. **인증 미들웨어**
   - **1차 시도**: JWT 토큰 기반 인증
   - **대안 1**: API 키 기반 인증 (간단)
   - **대안 2**: 환경 변수로 인증 활성화/비활성화

3. **타입 검증**
   - **1차 시도**: 타입 가드 함수 구현
   - **대안 1**: Zod 라이브러리 도입
   - **대안 2**: JSON Schema 검증

#### Phase 2 대안

1. **성능 최적화**
   - **1차 시도**: 인덱스 파일 생성
   - **대안 1**: 캐싱 메커니즘만 도입
   - **대안 2**: 스트리밍 처리 (장기)

2. **검증 로직 통합**
   - **1차 시도**: 공통 검증 유틸리티 함수
   - **대안 1**: Zod 스키마 공유
   - **대안 2**: 기존 검증 로직 유지

#### Phase 3 대안

1. **제네릭 컴포넌트**
   - **1차 시도**: Svelte 5 제네릭 컴포넌트
   - **대안 1**: Props로 타입 전달
   - **대안 2**: 별도 컴포넌트 유지 (중복 허용)

2. **파일 분리**
   - **1차 시도**: 엔티티별 파일로 분리
   - **대안 1**: 기능별 파일로 분리
   - **대안 2**: 파일 크기만 줄이고 구조 유지

### 롤백 전략

#### Phase 1 롤백

1. **파일 락 메커니즘**
   - **롤백 방법**: 파일 락 코드 제거, 기존 방식으로 복원
   - **롤백 조건**: 파일 락으로 인한 데드락 발생
   - **롤백 시간**: 1일

2. **인증 미들웨어**
   - **롤백 방법**: 인증 미들웨어 비활성화, 환경 변수로 제어
   - **롤백 조건**: 기존 클라이언트 작동 중단
   - **롤백 시간**: 즉시

3. **타입 검증**
   - **롤백 방법**: 타입 가드 함수 제거, 기존 타입 단언으로 복원
   - **롤백 조건**: 타입 검증으로 인한 기능 작동 중단
   - **롤백 시간**: 0.5일

#### Phase 2 롤백

1. **캐싱 메커니즘**
   - **롤백 방법**: 캐싱 코드 제거, 직접 로드로 복원
   - **롤백 조건**: 메모리 부족 또는 캐시 불일치
   - **롤백 시간**: 0.5일

2. **검증 로직 통합**
   - **롤백 방법**: 기존 검증 로직으로 복원
   - **롤백 조건**: 검증 로직 통합으로 인한 기능 작동 중단
   - **롤백 시간**: 1일

#### Phase 3 롤백

1. **컴포넌트 통합**
   - **롤백 방법**: 기존 컴포넌트로 복원
   - **롤백 조건**: 통합 컴포넌트로 인한 기능 작동 중단
   - **롤백 시간**: 1일

2. **파일 분리**
   - **롤백 방법**: 기존 파일로 병합
   - **롤백 조건**: import 경로 문제 또는 기능 작동 중단
   - **롤백 시간**: 0.5일

---

## 4. 마일스톤

### 주차별 목표

#### Week 1-2: Phase 1 (Critical 이슈)

**Week 1 목표**:

- ✅ #C10 (Path Traversal) 해결
- ✅ #C2 (타입 검증) 기반 작업 완료
- ✅ #C1 (동시성) 파일 락 메커니즘 설계 및 구현 시작

**Week 2 목표**:

- ✅ #C1 (동시성) 완료
- ✅ #C5 (원자적 쓰기) 완료
- ✅ #C9 (인증) 기본 구조 완료
- ✅ #C3, #C4, #C7, #C8 완료

**검증 포인트**:

- 동시성 테스트 통과
- Path Traversal 공격 방어 확인
- 타입 검증 동작 확인
- 인증 미들웨어 동작 확인

---

#### Week 3-4: Phase 2 시작 (High Priority - 우선순위 1)

**Week 3 목표**:

- ✅ #H3 (N+1 문제) 캐싱 메커니즘 구현
- ✅ #H4 (데이터 검증) 타입 가드 함수 확장
- ✅ #H7 (메모리 로드) 인덱스 파일 설계

**Week 4 목표**:

- ✅ #H7 (메모리 로드) 인덱스 파일 구현 완료
- ✅ #H4 (데이터 검증) 완료
- ✅ #H3 (N+1 문제) 완료

**검증 포인트**:

- 성능 테스트 통과 (50% 이상 개선)
- 대용량 데이터 조회 성능 확인
- 검증 로직 동작 확인

---

#### Week 5-6: Phase 2 계속 (High Priority - 우선순위 2)

**Week 5 목표**:

- ✅ #H1 (하위 호환성 필드) 마이그레이션 스크립트 작성
- ✅ #H2 (History API) 제네릭 타입 구현
- ✅ #H5 (Domain API POST) 엔드포인트 추가

**Week 6 목표**:

- ✅ #H6 (에러 처리) 에러 핸들러 유틸리티 완료
- ✅ #H8 (검증 로직 통합) 완료
- ✅ #H9 (Partial 타입) 완료
- ✅ #H10 (API 응답 타입) 완료

**검증 포인트**:

- Domain API POST 동작 확인
- 에러 처리 일관성 확인
- API 응답 타입 통일 확인

---

#### Week 7-10: Phase 3 시작 (Medium Priority - 우선순위 2)

**Week 7 목표**:

- ✅ #M3 (Table 컴포넌트) 제네릭 컴포넌트 설계
- ✅ #M8 (TermEditor) 분리 작업 시작

**Week 8 목표**:

- ✅ #M3 (Table 컴포넌트) 통합 완료
- ✅ #M8 (TermEditor) 분리 완료
- ✅ #M10 (Props Drilling) 해결

**Week 9 목표**:

- ✅ #M9 (file-handler.ts 분리) 설계 및 시작
- ✅ #M7 (browse 페이지) 상태 관리 통합 시작

**Week 10 목표**:

- ✅ #M9 (file-handler.ts 분리) 완료
- ✅ #M1, #M2 (중복 제거) 완료
- ✅ #M7 (browse 페이지) 통합 완료

**검증 포인트**:

- 모든 페이지 기능 정상 동작
- 컴포넌트 렌더링 확인
- 파일 분리 후 import 경로 확인

---

#### Week 11-14: Phase 3 계속 (Medium Priority - 우선순위 3)

**Week 11 목표**:

- ✅ #M4 (FileManager) 통합 시작
- ✅ #M12 (데이터 로드 패턴) 통합

**Week 12 목표**:

- ✅ #M4 (FileManager) 통합 완료
- ✅ #M13 (xlsx-parser.ts 분리) 시작
- ✅ #M5 (파싱 함수 통합) 시작

**Week 13 목표**:

- ✅ #M13 (xlsx-parser.ts 분리) 완료
- ✅ #M5 (파싱 함수 통합) 완료
- ✅ #M11 (데이터 변환) 중복 제거

**Week 14 목표**:

- ✅ #M14 (상태 관리 패턴) 통일 완료
- ✅ #M6 (네이밍) 통일 완료
- ✅ Phase 3 완료 검증

**검증 포인트**:

- 모든 리팩토링 작업 완료 확인
- 코드 중복 50% 이상 감소 확인
- 모든 기능 정상 동작 확인

---

#### Week 15+: Phase 4 (Low Priority - 지속적)

**지속적 목표**:

- ✅ #L1 (로깅 라이브러리) 도입
- ✅ #L3 (테스트 코드) 작성 (핵심 기능부터)
- ✅ #L7, #L13 (주석 개선) (우선순위 높은 함수부터)
- ✅ #L15 (매직 넘버) 상수화
- ✅ #L2, #L10 (타입 개선)

**검증 포인트**:

- 테스트 커버리지 60% 이상
- 로깅 라이브러리 동작 확인
- 주석 개선 사항 검토

---

### 검증 포인트 상세

#### Phase 1 검증 포인트

1. **동시성 테스트**
   - 두 개의 브라우저 탭에서 동시에 같은 데이터 수정
   - 두 요청 모두 성공하고 데이터 손실 없음 확인

2. **Path Traversal 방어**
   - `filename=../../../../etc/passwd` 파라미터로 API 호출
   - 에러 응답 반환 확인

3. **타입 검증**
   - 손상된 JSON 파일 로드 시도
   - 적절한 에러 메시지 반환 확인

4. **인증 미들웨어**
   - 인증 없이 API 호출 시 401 에러 반환 확인
   - 인증 토큰으로 정상 동작 확인

#### Phase 2 검증 포인트

1. **성능 개선**
   - 10,000개 엔트리 조회 시간 측정
   - Phase 1 대비 50% 이상 개선 확인

2. **N+1 문제 해결**
   - Term 엔트리 100개 추가 시 파일 로드 횟수 측정
   - 캐싱 전후 비교

3. **검증 로직 통합**
   - 클라이언트와 서버 검증 로직 일치 확인
   - 검증 실패 시 일관된 에러 메시지 확인

#### Phase 3 검증 포인트

1. **컴포넌트 통합**
   - 모든 페이지에서 통합 컴포넌트 정상 동작 확인
   - 기존 기능과 동일한 동작 확인

2. **파일 분리**
   - 모든 import 경로 정상 동작 확인
   - 파일 크기 감소 확인

3. **코드 중복 감소**
   - 코드 중복 분석 도구로 측정
   - 50% 이상 감소 확인

#### Phase 4 검증 포인트

1. **테스트 커버리지**
   - 테스트 커버리지 도구로 측정
   - 60% 이상 달성 확인

2. **로깅 라이브러리**
   - 프로덕션 환경에서 console.log 없음 확인
   - 에러 로깅 정상 동작 확인

---

## 요약

### 전체 일정

| Phase    | 기간        | 주요 목표                      | 예상 소요 시간 |
| -------- | ----------- | ------------------------------ | -------------- |
| 1        | 1-2주       | Critical 이슈 해결             | 16.5일         |
| 2        | 3-4주       | High Priority 이슈 해결        | 23일           |
| 3        | 5-8주       | Medium Priority 리팩토링       | 32일           |
| 4        | 지속적      | Low Priority 개선              | 20일 (분산)    |
| **총계** | **약 14주** | **모든 이슈 해결 및 리팩토링** | **91.5일**     |

### 우선순위별 이슈 수

| 우선순위 | Critical | High   | Medium | Low    | 총계   |
| -------- | -------- | ------ | ------ | ------ | ------ |
| 1        | 5        | 3      | 0      | 0      | 8      |
| 2        | 4        | 7      | 4      | 0      | 15     |
| 3        | 1        | 0      | 9      | 0      | 10     |
| 4        | 0        | 0      | 1      | 5      | 6      |
| 5        | 0        | 0      | 0      | 10     | 10     |
| **총계** | **10**   | **10** | **14** | **15** | **49** |

### 주요 마일스톤

- **Week 2**: Phase 1 완료 (Critical 이슈 해결)
- **Week 6**: Phase 2 완료 (High Priority 이슈 해결)
- **Week 14**: Phase 3 완료 (Medium Priority 리팩토링)
- **지속적**: Phase 4 진행 (Low Priority 개선)

---

**마지막 업데이트**: 2024-01-01
