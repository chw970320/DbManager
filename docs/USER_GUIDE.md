# 📖 사용자 가이드

DbManager 프로젝트의 각 기능을 상세히 설명하는 사용자 매뉴얼입니다.

**대상**: 실제 사용자 (데이터 아키텍트, DB 설계자, 데이터 관리자)

---

## 목차

1. [단어집 관리](#단어집-관리)
2. [도메인 관리](#도메인-관리)
3. [용어 생성 및 관리](#용어-생성-및-관리)
4. [용어 자동 생성기 사용법](#용어-자동-생성기-사용법)
5. [파일 업로드 가이드](#파일-업로드-가이드)
6. [매핑 동기화 가이드](#매핑-동기화-가이드)
7. [문제 해결 (FAQ)](#문제-해결-faq)

---

## 단어집 관리

### 단어집이란?

**단어집(Vocabulary)**은 한국어 표준 용어와 그에 대응하는 영문 약어/전체명을 관리하는 사전입니다.

**핵심 개념**:
- **표준단어명** (`standardName`): 한국어 표준 용어 (예: "사용자")
- **영문약어** (`abbreviation`): 데이터베이스 컬럼명에 사용 (예: "USER")
- **영문명** (`englishName`): 전체 영문명 (예: "User")

### 단어 추가하기

1. **단어집 페이지**로 이동 (`/browse`)
2. **"새 단어 추가"** 버튼 클릭
3. 필수 정보 입력:
   - 표준단어명 (한국어)
   - 영문약어
   - 영문명
   - 설명
4. 선택 정보 입력:
   - 도메인 분류명 (`domainCategory`)
   - 형식단어 여부 (`isFormalWord`)
   - 이음동의어 (`synonyms`)
   - 금칙어 (`forbiddenWords`)
5. **저장** 버튼 클릭

### 단어 수정하기

1. 단어집 테이블에서 수정할 단어 클릭
2. **"수정"** 버튼 클릭
3. 정보 수정 후 **저장**

### 단어 삭제하기

1. 단어집 테이블에서 삭제할 단어 선택
2. **"삭제"** 버튼 클릭
3. 확인 대화상자에서 **확인**

### 파일 관리

#### 새 파일 생성

1. **"파일 관리"** 섹션에서 **"새 파일 생성"** 클릭
2. 파일명 입력 (예: `project-vocabulary.json`)
3. **생성** 버튼 클릭

#### 파일 이름 변경

1. **"파일 관리"** 섹션에서 파일 선택
2. **"이름 변경"** 버튼 클릭
3. 새 파일명 입력 후 **저장**

#### 파일 삭제

1. **"파일 관리"** 섹션에서 파일 선택
2. **"삭제"** 버튼 클릭
3. 확인 대화상자에서 **확인**

### 검색 및 필터링

- **검색**: 표준단어명, 영문약어, 영문명으로 검색
- **정렬**: 표준단어명, 영문약어, 생성일시 등으로 정렬
- **필터링**: 
  - 중복 단어 필터
  - 도메인 미매핑 필터

### Excel 파일 업로드

1. **"파일 업로드"** 버튼 클릭
2. Excel 파일 선택 (`.xlsx` 또는 `.xls`)
3. 파일 형식 확인:
   - 필수 컬럼: 표준단어명, 영문약어, 영문명, 설명
   - 선택 컬럼: 도메인 분류명, 형식단어 여부 등
4. **업로드** 버튼 클릭
5. 업로드 결과 확인

### Excel 파일 다운로드

1. **"다운로드"** 버튼 클릭
2. Excel 파일로 저장

---

## 도메인 관리

### 도메인이란?

**도메인(Domain)**은 공통표준도메인 정보를 관리하는 표준 도메인 사전입니다.

**핵심 개념**:
- **도메인 그룹** (`domainGroup`): 공통표준도메인그룹명
- **도메인 분류** (`domainCategory`): 공통표준도메인분류명
- **표준 도메인명** (`standardDomainName`): 계산된 값 (예: "공통표준도메인그룹_사용자분류")

### 도메인 추가하기

1. **도메인 페이지**로 이동 (`/domain/browse`)
2. **"새 도메인 추가"** 버튼 클릭
3. 필수 정보 입력:
   - 도메인 그룹명
   - 도메인 분류명
   - 물리 데이터 타입
4. 선택 정보 입력:
   - 데이터 길이
   - 형식 패턴
   - 설명
5. **저장** 버튼 클릭

### 도메인 수정/삭제

단어집과 동일한 방식으로 수정/삭제할 수 있습니다.

### Excel 파일 업로드/다운로드

단어집과 동일한 방식으로 Excel 파일을 업로드/다운로드할 수 있습니다.

---

## 용어 생성 및 관리

### 용어란?

**용어(Term)**는 실제 데이터베이스에서 사용할 용어명, 컬럼명, 도메인명을 조합한 최종 용어입니다.

**핵심 개념**:
- **용어명** (`termName`): 한국어 용어 (예: "사용자_이름")
- **컬럼명** (`columnName`): 영문 컬럼명 (예: "USER_NAME")
- **도메인명** (`domainName`): 표준 도메인명 (예: "공통표준도메인그룹_사용자분류")

### 용어 추가하기

#### 방법 1: 수동 입력

1. **용어 페이지**로 이동 (`/term/browse`)
2. **"새 용어 추가"** 버튼 클릭
3. 필수 정보 입력:
   - 용어명 (한국어, 언더스코어로 구분)
   - 컬럼명 (영문, 언더스코어로 구분)
   - 도메인명
4. **저장** 버튼 클릭
5. 매핑 검증 결과 확인

#### 방법 2: 용어 자동 생성기 사용

[용어 자동 생성기 사용법](#용어-자동-생성기-사용법) 섹션 참조

### 용어 수정하기

1. 용어 테이블에서 수정할 용어 클릭
2. **"수정"** 버튼 클릭
3. 정보 수정 후 **저장**
4. 매핑 검증 결과 확인

### 용어 삭제하기

1. 용어 테이블에서 삭제할 용어 선택
2. **"삭제"** 버튼 클릭
3. 확인 대화상자에서 **확인**

### 매핑 검증

용어는 다음 세 가지 매핑을 검증합니다:

1. **용어명 매핑** (`isMappedTerm`):
   - 용어명을 언더스코어로 분리한 각 단어가 단어집의 `standardName`에 존재해야 함
   - 예: "사용자_이름" → ["사용자", "이름"] 각각이 단어집에 존재

2. **컬럼명 매핑** (`isMappedColumn`):
   - 컬럼명을 언더스코어로 분리한 각 단어가 단어집의 `abbreviation`에 존재해야 함
   - 예: "USER_NAME" → ["USER", "NAME"] 각각이 단어집에 존재

3. **도메인 매핑** (`isMappedDomain`):
   - 도메인명이 도메인의 `standardDomainName`과 정확히 일치해야 함

### 매핑 실패 시 자동 수정

매핑이 실패한 경우, 시스템이 자동으로 수정 제안을 제공합니다:

1. **단어집에 없는 단어 발견**:
   - 해당 단어를 단어집에 추가하는 제안
   - 유사한 단어 제안

2. **도메인명 불일치**:
   - 올바른 도메인명 제안
   - 도메인 자동 생성 제안

3. **자동 수정 적용**:
   - 제안된 수정 사항을 확인 후 **"자동 수정 적용"** 버튼 클릭

---

## 용어 자동 생성기 사용법

### 용어 자동 생성기란?

**용어 자동 생성기(Term Generator)**는 한국어 용어를 입력하면 단어집을 기반으로 가능한 영문 컬럼명 조합을 자동으로 생성하는 도구입니다.

### 사용 방법

1. **용어 페이지**로 이동 (`/term/browse`)
2. **"용어 변환기"** 섹션으로 스크롤
3. 한국어 용어 입력:
   - 예: "사용자 이름"
   - 여러 단어는 공백으로 구분
4. **"생성"** 버튼 클릭
5. 생성된 조합 목록 확인:
   - 각 조합의 매핑 상태 표시
   - ✅: 매핑 성공
   - ❌: 매핑 실패 (원인 표시)
6. 적절한 조합 선택
7. 도메인명 선택 (자동 추천 가능)
8. **"용어 추가"** 버튼 클릭

### 생성 로직

1. 입력된 한국어 용어를 단어로 분리
2. 각 단어에 대해 단어집에서 가능한 영문약어 조회
3. 모든 조합 생성 (Cartesian Product)
4. 각 조합의 매핑 상태 검증
5. 결과 표시

### 예시

**입력**: "사용자 이름"

**단어집 데이터**:
- "사용자" → ["USER", "MEMBER"]
- "이름" → ["NAME", "FIRST_NAME"]

**생성된 조합**:
- `USER_NAME` ✅
- `USER_FIRST_NAME` ✅
- `MEMBER_NAME` ✅
- `MEMBER_FIRST_NAME` ✅

---

## 파일 업로드 가이드

### 업로드 모드

파일 업로드 시 두 가지 모드를 선택할 수 있습니다:

#### 검증 교체 모드 (Validated Replace)
- 기존 데이터를 완전히 삭제하고 새로운 데이터로 교체
- 데이터 검증 후 업로드 (중복 체크, 형식 검증 등)
- 히스토리 초기화
- **권장**: 데이터 정합성이 중요한 경우

#### 단순 교체 모드 (Simple Replace)
- 기존 데이터를 완전히 삭제하고 새로운 데이터로 교체
- 검증 없이 바로 교체
- 히스토리 초기화
- **주의**: 파일 백업 권장

> ⚠️ **참고**: 병합 모드와 덮어쓰기 모드는 더 이상 지원되지 않습니다.

### Excel 파일 형식

#### 단어집 업로드 형식

| 표준단어명 | 영문약어 | 영문명 | 설명 | 도메인 분류명 | 형식단어 여부 |
|-----------|---------|--------|------|-------------|-------------|
| 사용자     | USER    | User   | 시스템 사용자 | 사용자분류   | Y           |
| 이름       | NAME    | Name   | 이름 정보   | 사용자분류   | Y           |

**필수 컬럼**: 표준단어명, 영문약어, 영문명, 설명

**선택 컬럼**: 도메인 분류명, 형식단어 여부, 이음동의어, 금칙어

#### 도메인 업로드 형식

| 도메인 그룹명 | 도메인 분류명 | 물리 데이터 타입 | 데이터 길이 | 형식 패턴 | 설명 |
|-------------|-------------|----------------|-----------|----------|------|
| 공통표준도메인그룹 | 사용자분류 | VARCHAR | 50 | - | 사용자 분류 정보 |

**필수 컬럼**: 도메인 그룹명, 도메인 분류명, 물리 데이터 타입

**선택 컬럼**: 데이터 길이, 형식 패턴, 설명

#### 용어 업로드 형식

| 용어명 | 컬럼명 | 도메인명 |
|-------|-------|---------|
| 사용자_이름 | USER_NAME | 공통표준도메인그룹_사용자분류 |

**필수 컬럼**: 용어명, 컬럼명, 도메인명

### 업로드 절차

1. **Excel 파일 준비**
   - 위 형식에 맞게 데이터 작성
   - 첫 번째 행은 헤더 (컬럼명)

2. **파일 관리 열기**
   - 해당 페이지에서 **"파일 관리"** 버튼 클릭
   - **"파일 업로드"** 탭 선택

3. **대상 파일 선택**
   - 업로드할 대상 파일 선택 (드롭다운)

4. **업로드 모드 선택**
   - **검증 교체 모드**: 데이터 검증 후 교체
   - **단순 교체 모드**: 검증 없이 바로 교체

5. **파일 업로드**
   - 드래그앤드롭 또는 클릭하여 파일 선택
   - **업로드** 버튼 클릭
   - 확인 대화상자에서 **확인**

6. **업로드 결과 확인**
   - 성공한 항목 수
   - 실패한 항목 및 원인
   - 자동 수정 제안 (있는 경우)

### 파일 관리 팝업 기능

파일 관리 팝업에서는 다음 기능을 사용할 수 있습니다:

1. **파일 목록 탭**
   - 새 파일 생성
   - 파일 이름 변경
   - 파일 삭제
   - **시스템 파일 표시** 토글: 시스템 파일(예: domain.json) 표시/숨김

2. **파일 업로드 탭**
   - 대상 파일 선택
   - 업로드 모드 선택 (검증 교체 / 단순 교체)
   - 파일 업로드 (드래그앤드롭 지원)

---

## 매핑 동기화 가이드

### Vocabulary ↔ Domain 동기화

단어집과 도메인을 `domainCategory`를 기준으로 자동 매핑합니다.

#### 동기화 방법

1. **단어집 페이지**로 이동 (`/browse`)
2. **"도메인 동기화"** 버튼 클릭
3. 동기화 결과 확인:
   - 매핑 성공한 단어 수
   - 매핑 실패한 단어 및 원인

#### 동기화 로직

- `VocabularyEntry.domainCategory` ↔ `DomainEntry.domainCategory` 매칭
- 매핑 성공 시 `VocabularyEntry.domainGroup`에 `DomainEntry.domainGroup` 자동 설정
- `VocabularyEntry.isDomainCategoryMapped` 플래그로 매핑 상태 표시

### Term 매핑 동기화

용어의 매핑 상태를 재검증합니다.

#### 동기화 방법

1. **용어 페이지**로 이동 (`/term/browse`)
2. **"매핑 동기화"** 버튼 클릭
3. 동기화 결과 확인:
   - 매핑 성공한 용어 수
   - 매핑 실패한 용어 및 원인
   - 자동 수정 제안

#### 동기화 로직

1. 모든 용어의 매핑 상태 재검증
2. 단어집/도메인 변경사항 반영
3. 매핑 실패 시 자동 수정 제안

---

## 문제 해결 (FAQ)

### Q1. 용어 생성 시 매핑이 실패합니다

**원인**:
- 단어집에 해당 단어가 없음
- 도메인명이 정확하지 않음

**해결 방법**:
1. 단어집에 누락된 단어 추가
2. 도메인명 확인 및 수정
3. 자동 수정 제안 활용

### Q2. Excel 파일 업로드가 실패합니다

**원인**:
- 파일 형식이 올바르지 않음
- 필수 컬럼 누락
- 데이터 형식 오류

**해결 방법**:
1. 파일 형식 확인 (헤더 행 포함)
2. 필수 컬럼 확인
3. 데이터 형식 확인 (날짜, 숫자 등)
4. 오류 메시지 확인 후 수정

### Q3. 도메인 동기화가 되지 않습니다

**원인**:
- `domainCategory`가 일치하지 않음
- 도메인 데이터가 없음

**해결 방법**:
1. 단어집의 `domainCategory` 확인
2. 도메인의 `domainCategory` 확인
3. 일치하지 않으면 수정

### Q4. 용어 자동 생성기가 조합을 생성하지 않습니다

**원인**:
- 단어집에 해당 단어가 없음
- 입력 형식이 올바르지 않음

**해결 방법**:
1. 단어집에 해당 단어 추가
2. 입력 형식 확인 (공백으로 단어 구분)

### Q5. 파일이 삭제되지 않습니다

**원인**:
- 파일이 사용 중
- 권한 문제

**해결 방법**:
1. 다른 페이지에서 파일 사용 중인지 확인
2. 브라우저 새로고침 후 재시도
3. 서버 재시작

---

## 추가 리소스

- **[빠른 시작 가이드](./QUICK_START.md)**: 빠른 시작 방법
- **[프로젝트 본질 분석](./PROJECT_DEEP_ANALYSIS.md)**: 프로젝트의 핵심 개념
- **[API 레퍼런스](./specs/api-reference.md)**: API 엔드포인트 상세 정보
- **[데이터 모델](./specs/data-model.md)**: 데이터 구조 이해

---

**마지막 업데이트**: 2024-12-12

