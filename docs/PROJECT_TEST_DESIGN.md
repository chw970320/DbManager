# π“ ν”„λ΅μ νΈ ν…μ¤νΈ μ„¤κ³„ λ¬Έμ„

μ΄ λ¬Έμ„λ” DbManager ν”„λ΅μ νΈμ ν…μ¤νΈ μ „λµ, λ„κµ¬, κµ¬ν„ κ³„νμ„ μ •μν•©λ‹λ‹¤.

## 1. ν…μ¤νΈ μ² ν•™

λ³Έ ν”„λ΅μ νΈλ” μ‹¤μ©μ μ΄κ³  μ μ§€λ³΄μ κ°€λ¥ν• ν…μ¤νΈ μ½”λ“ μ‘μ„±μ„ μ§€ν–¥ν•λ©°, λ‹¤μκ³Ό κ°™μ€ **ν…μ¤νΈ ν”ΌλΌλ―Έλ“** μ „λµμ„ λ”°λ¦…λ‹λ‹¤.

- **λ‹¨μ„ ν…μ¤νΈ (Unit Tests)**: κ°€μ¥ λ§μ€ ν…μ¤νΈ μΌ€μ΄μ¤λ¥Ό μ‘μ„±ν•©λ‹λ‹¤. `src/lib/utils`μ™€ κ°™μ€ ν•µμ‹¬ λ΅μ§κ³Ό μμ ν•¨μλ¥Ό λ€μƒμΌλ΅ ν•λ©°, μ‘κ³  λ…λ¦½μ μΈ λ‹¨μ„λ΅ κΈ°λ¥μ„ κ²€μ¦ν•©λ‹λ‹¤.
- **μ»΄ν¬λ„νΈ/ν†µν•© ν…μ¤νΈ (Component/Integration Tests)**: Svelte μ»΄ν¬λ„νΈμ λ™μ‘κ³Ό API μ—”λ“ν¬μΈνΈμ λ΅μ§μ„ κ²€μ¦ν•©λ‹λ‹¤. λ‹¨μ„ ν…μ¤νΈλ³΄λ‹¤ μƒμ„ λ λ²¨μ—μ„ μ—¬λ¬ λ¶€λ¶„μ΄ ν•¨κ» λ™μ‘ν•λ” λ°©μ‹μ„ ν…μ¤νΈν•©λ‹λ‹¤.
- **End-to-End (E2E) ν…μ¤νΈ**: μ†μμ ν•µμ‹¬μ μΈ μ‚¬μ©μ μ‹λ‚λ¦¬μ¤(Critical User Flows)λ§μ„ λ€μƒμΌλ΅ ν•©λ‹λ‹¤. μ‹¤μ  μ‚¬μ©μμ κ΄€μ μ—μ„ μ‹μ¤ν… μ „μ²΄κ°€ μ¬λ°”λ¥΄κ² λ™μ‘ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

## 2. ν…μ¤νΈ λ„κµ¬

- **ν…μ¤νΈ λ¬λ„ & ν”„λ μ„μ›ν¬**: **Vitest**
  - Vite κΈ°λ° ν”„λ΅μ νΈμ™€μ μ™„λ²½ν• ν†µν•© λ° λΉ λ¥Έ μ‹¤ν–‰ μ†λ„λ¥Ό μ κ³µν•©λ‹λ‹¤.
- **μ»΄ν¬λ„νΈ ν…μ¤ν…**: **Svelte Testing Library**
  - μ‚¬μ©μμ κ΄€μ μ—μ„ μ»΄ν¬λ„νΈμ™€ μƒνΈμ‘μ©ν•λ©° ν…μ¤νΈν•  μ μλ„λ΅ λ•μµλ‹λ‹¤.
- **E2E ν…μ¤ν…**: **Playwright**
  - SvelteKitμ κ³µμ‹ E2E ν…μ¤νΈ λ„κµ¬λ΅, λ¨λ μ›Ή μ•±μ„ μ„ν• κ°•λ ¥ν•κ³  μ•μ •μ μΈ κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤.
- **Mocking**: **Vitest**μ λ‚΄μ¥ λ¨μ(Mock) κΈ°λ¥ (`vi.mock`)
  - νμΌ μ‹μ¤ν…, API ν΄λΌμ΄μ–ΈνΈ λ“± μ™Έλ¶€ μμ΅΄μ„±μ„ κ²©λ¦¬ν•μ—¬ ν…μ¤νΈμ μ•μ •μ„±κ³Ό μ†λ„λ¥Ό λ†’μ…λ‹λ‹¤.

## 3. ν…μ¤νΈ μ ν•λ³„ μ „λµ

### 3.1. λ‹¨μ„ ν…μ¤νΈ (Unit Tests)

- **λ€μƒ**: `src/lib/utils` λ””λ ‰ν† λ¦¬μ μ ν‹Έλ¦¬ν‹° ν•¨μλ“¤.
- **λ©ν‘**: κ° ν•¨μκ°€ μ£Όμ–΄μ§„ μ…λ ¥μ— λ€ν•΄ κΈ°λ€ν•λ” μ¶λ ¥μ„ λ°ν™ν•λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤. μ™Έλ¶€ μμ΅΄μ„±μ΄ μ—†λ” μμ ν•¨μκ°€ μ£Όλ λ€μƒμ…λ‹λ‹¤.
- **μμ‹**:
  - `debounce.ts`: λ””λ°”μ΄μ¤ λ΅μ§μ΄ μ •μƒμ μΌλ΅ λ™μ‘ν•λ”μ§€ μ‹κ°„ κΈ°λ°μΌλ΅ ν…μ¤νΈν•©λ‹λ‹¤.
  - `validation.ts`: κ° λ°μ΄ν„° λ¨λΈμ μ ν¨μ„± κ²€μ¦ λ΅μ§μ„ ν…μ¤νΈν•©λ‹λ‹¤.
  - `file-filter.ts`: μ‹μ¤ν… νμΌ ν•„ν„°λ§ λ΅μ§μ„ ν…μ¤νΈν•©λ‹λ‹¤.

### 3.2. μ»΄ν¬λ„νΈ ν…μ¤νΈ (Component Tests)

- **λ€μƒ**: `src/lib/components` λ””λ ‰ν† λ¦¬μ Svelte μ»΄ν¬λ„νΈ.
- **λ©ν‘**: μ»΄ν¬λ„νΈκ°€ μ£Όμ–΄μ§„ `props`μ— λ”°λΌ μ¬λ°”λ¥΄κ² λ λ”λ§λκ³ , μ‚¬μ©μμ μƒνΈμ‘μ©(ν΄λ¦­, μ…λ ¥ λ“±)μ— λ”°λΌ κΈ°λ€λ€λ΅ λ™μ‘ν•λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤.
- **μμ‹**:
  - `SearchBar.svelte`: κ²€μƒ‰μ–΄ μ…λ ¥ μ‹ `onsearch` μ΄λ²¤νΈκ°€ μ¬λ°”λ¥Έ κ°’κ³Ό ν•¨κ» μ „λ‹¬λλ”μ§€ ν™•μΈν•©λ‹λ‹¤.
  - `*Editor.svelte`: ν•„μ ν•„λ“λ¥Ό λ„λ½ν•κ³  μ €μ¥ λ²„νΌ ν΄λ¦­ μ‹, μ ν¨μ„± κ²€μ¦ μ—λ¬ λ©”μ‹μ§€κ°€ ν‘μ‹λλ”μ§€ ν™•μΈν•©λ‹λ‹¤.
  - `FileUpload.svelte`: νμΌ μ—…λ΅λ“ μ‹ `onuploadsuccess` λλ” `onuploaderror` μ΄λ²¤νΈκ°€ μ μ ν λ°μƒν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

### 3.3. ν†µν•© ν…μ¤νΈ (API Endpoints)

- **λ€μƒ**: `src/routes/api/**/+server.ts` νμΌμ API ν•Έλ“¤λ¬ (`GET`, `POST`, `PUT`, `DELETE`).
- **λ©ν‘**: APIκ°€ μ”μ²­(Request)μ„ μ¬λ°”λ¥΄κ² νμ‹±ν•κ³ , λ°μ΄ν„° ν•Έλ“¤λ¬λ¥Ό νΈμ¶ν•λ©°, κΈ°λ€ν•λ” μ‘λ‹µ(Response)μ„ λ°ν™ν•λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤.
- **μ „λµ**:
  - `vitest`λ¥Ό μ‚¬μ©ν•μ—¬ ν…μ¤νΈλ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.
  - `vi.mock`μ„ μ‚¬μ©ν•μ—¬ `src/lib/utils/database-design-handler.ts` μ™€ `src/lib/utils/file-handler.ts` κ°™μ€ νμΌ μ‹μ¤ν… μ ‘κ·Ό λ΅μ§μ„ λ¨μ(Mock) μ²λ¦¬ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ μ‹¤μ  νμΌ I/O μ—†μ΄ ν…μ¤νΈλ¥Ό μν–‰ν•μ—¬ μ†λ„μ™€ μ•μ •μ„±μ„ ν™•λ³΄ν•©λ‹λ‹¤.
  - κ° `+server.ts`μ—μ„ `export`λ `GET`, `POST` λ“±μ ν•¨μλ¥Ό ν…μ¤νΈ μ½”λ“μ—μ„ μ§μ ‘ `import`ν•μ—¬ νΈμ¶ν•©λ‹λ‹¤. μ΄λ•, SvelteKitμ `RequestEvent` κ°μ²΄λ¥Ό λ¨μ μƒμ„±ν•μ—¬ μΈμλ΅ μ „λ‹¬ν•©λ‹λ‹¤.

### 3.4. End-to-End (E2E) ν…μ¤νΈ

- **λ€μƒ**: ν•µμ‹¬ μ‚¬μ©μ μ‹λ‚λ¦¬μ¤.
- **λ©ν‘**: μ‹¤μ  μ‚¬μ©μκ°€ λΈλΌμ°μ €λ¥Ό ν†µν•΄ κ²½ν—ν•λ” μ „μ²΄ μ• ν”λ¦¬μΌ€μ΄μ… νλ¦„μ΄ λ¬Έμ μ—†μ΄ λ™μ‘ν•λ”μ§€ κ²€μ¦ν•©λ‹λ‹¤.
- **μ£Όμ” μ‹λ‚λ¦¬μ¤ μμ‹**:
  1.  **λ‹¨μ–΄μ§‘ κ΄€λ¦¬**: μ‚¬μ©μκ°€ λ΅κ·ΈμΈν•μ—¬ μƒ λ‹¨μ–΄λ¥Ό μ¶”κ°€ν•κ³ , λ©λ΅μ—μ„ ν™•μΈν• λ’¤, μμ •ν•κ³  μµμΆ…μ μΌλ΅ μ‚­μ ν•λ” μ „μ²΄ κ³Όμ •.
  2.  **νμΌ μ—…λ΅λ“ λ° κ²€μ¦**: μ‚¬μ©μκ°€ Excel νμΌμ„ μ—…λ΅λ“ν•κ³ , μ²λ¦¬ κ²°κ³Ό(μ„±κ³µ/μ‹¤ν¨ κ±΄μ, μ—λ¬ λ©”μ‹μ§€)λ¥Ό UIμ—μ„ ν™•μΈν•λ” κ³Όμ •.
  3.  **κ²€μƒ‰ λ° ν•„ν„°λ§**: μ‚¬μ©μκ°€ νΉμ • ν…μ΄λΈ”(μ: λ°μ΄ν„°λ² μ΄μ¤) λ©λ΅μ—μ„ κ²€μƒ‰μ–΄λ¥Ό μ…λ ¥ν•κ³ , μ»¬λΌ ν•„ν„°λ¥Ό μ μ©ν•μ—¬ κ²°κ³Όκ°€ μ¬λ°”λ¥΄κ² κ°±μ‹ λλ”μ§€ ν™•μΈν•λ” κ³Όμ •.

## 4. ν”„λ΅μ νΈ μ„¤μ • λ° κµ¬μ„±

### 4.1. ν•„μ” ν¨ν‚¤μ§€ μ„¤μΉ

```bash
pnpm add -D vitest @vitest/ui @testing-library/svelte @testing-library/jest-dom jsdom @playwright/test
```

### 4.2. μ„¤μ • νμΌ

#### `vitest.config.ts` (μ‹ κ· μƒμ„±)

```typescript
import { defineConfig } from 'vitest/config';
import { svelte } from '@sveltejs/vite-plugin-svelte';

export default defineConfig({
	plugins: [svelte({ hot: !process.env.VITEST })],
	test: {
		globals: true,
		environment: 'jsdom',
		setupFiles: ['./vitest-setup.ts'],
		include: ['src/**/*.{test,spec}.{js,ts}']
	}
});
```

#### `vitest-setup.ts` (μ‹ κ· μƒμ„±)
```typescript
import '@testing-library/jest-dom';
```

#### `playwright.config.ts` (SvelteKit κΈ°λ³Έ μ κ³µ)
E2E ν…μ¤νΈλ¥Ό μ„ν• Playwright μ„¤μ •μ„ μ •μν•©λ‹λ‹¤. (κΈ°λ³Έ μ„¤μ • μ μ§€)

### 4.3. `package.json` μ¤ν¬λ¦½νΈ μ¶”κ°€

```json
"scripts": {
  // ... κΈ°μ΅΄ μ¤ν¬λ¦½νΈ
  "test": "vitest",
  "test:ui": "vitest --ui",
  "test:e2e": "playwright test"
}
```

## 5. ν…μ¤νΈ νμΌ κµ¬μ΅°

- **λ‹¨μ„/μ»΄ν¬λ„νΈ/ν†µν•© ν…μ¤νΈ**: ν…μ¤νΈ λ€μƒ νμΌκ³Ό λ™μΌν• λ””λ ‰ν† λ¦¬μ— `.test.ts`(λλ” `.spec.ts`) μ ‘λ―Έμ‚¬λ¥Ό λ¶™μ—¬ μ„μΉμ‹ν‚µλ‹λ‹¤.
  - μ: `src/lib/utils/debounce.ts` β†’ `src/lib/utils/debounce.test.ts`
- **E2E ν…μ¤νΈ**: ν”„λ΅μ νΈ λ£¨νΈμ `tests` λ””λ ‰ν† λ¦¬ μ•μ— μ‹λ‚λ¦¬μ¤λ³„λ΅ νμΌμ„ μƒμ„±ν•©λ‹λ‹¤.
  - μ: `tests/vocabulary.spec.ts`

## 6. κµ¬ν„ κ³„ν

1.  **1λ‹¨κ³„ (ν™κ²½ κµ¬μ¶•)**: Vitest, Svelte Testing Library, Playwright λ“± ν•„μ” ν¨ν‚¤μ§€λ¥Ό μ„¤μΉν•κ³  κ΄€λ ¨ μ„¤μ • νμΌμ„ κµ¬μ„±ν•μ—¬ ν…μ¤νΈ μ‹¤ν–‰ ν™κ²½μ„ κµ¬μ¶•ν•©λ‹λ‹¤.
2.  **2λ‹¨κ³„ (λ‹¨μ„ ν…μ¤νΈ)**: `src/lib/utils/debounce.ts` μ™€ κ°™μ΄ ν•µμ‹¬μ μ΄κ³  λ…λ¦½μ μΈ μ ν‹Έλ¦¬ν‹° ν•¨μμ— λ€ν• λ‹¨μ„ ν…μ¤νΈλ¥Ό μ‘μ„±ν•μ—¬ ν…μ¤νΈ μ‘μ„± μ»¨λ²¤μ…μ„ μλ¦½ν•©λ‹λ‹¤.
3.  **3λ‹¨κ³„ (ν†µν•©/μ»΄ν¬λ„νΈ ν…μ¤νΈ)**: ν•λ‚μ κΈ°λ¥(μ: λ‹¨μ–΄μ§‘)μ„ μ„ μ •ν•μ—¬ API ν†µν•© ν…μ¤νΈμ™€ `VocabularyEditor.svelte` κ°™μ€ μ£Όμ” μ»΄ν¬λ„νΈμ— λ€ν• ν…μ¤νΈλ¥Ό μ‘μ„±ν•©λ‹λ‹¤.
4.  **4λ‹¨κ³„ (E2E ν…μ¤νΈ)**: "λ‹¨μ–΄μ§‘ κ΄€λ¦¬" μ‹λ‚λ¦¬μ¤μ— λ€ν• E2E ν…μ¤νΈ μ½”λ“λ¥Ό `tests/vocabulary.spec.ts`μ— μ‘μ„±ν•μ—¬ μ „μ²΄ νλ¦„μ„ κ²€μ¦ν•©λ‹λ‹¤.